import{u as F,a as z,_ as Ve,g as an,b as pt,o as k,p as ee,O as T,S as x,h as Et,c as jn,n as B,d as O,s as de,l as lt,e as N,f as Ge,i as A,j as n,M as re,k as oe,m as Z,q as ae,r as E,I as Be,T as In,F as Ln,t as ge,B as j,v as ie,w as fe,x as $e,y as Dn,z as Vn,A as Bn,C as wt,L as sn,D as zn,E as Hn,G as ln,H as me,J as Te,K as Pe,N as Fe,P as bt,Q as vt,R as ze,U as Je,V as K,W as Nn,X as Q,Y as Un,Z as Re,$ as qn,a0 as Wn,a1 as Se,a2 as pe,a3 as Kn,a4 as U,a5 as Gn,a6 as He,a7 as Ne,a8 as yt,a9 as Jn,aa as Me,ab as Ye,ac as _t,ad as he,ae as cn,af as Xn,ag as $t,ah as Zn,ai as Qn,aj as b,ak as St,al as Ue,am as et,an as un,ao as se,ap as Yn,aq as er,ar as tr,as as ve,at as dn,au as nr,av as P,aw as hn,ax as gn,ay as rr,az as or,aA as ar,aB as At,aC as fn,aD as ir,aE as sr,aF as lr,aG as cr,aH as ur,aI as dr,aJ as Tt,aK as hr,aL as gr,aM as fr,aN as mr,aO as G,aP as pr,aQ as qe,aR as wr,aS as Pt,aT as br,aU as vr,aV as yr,aW as _r,aX as $r,aY as Sr,aZ as Cr,a_ as xr,a$ as kr,b0 as Or,b1 as Mr,b2 as Er,b3 as Ft,b4 as Ar,b5 as Tr,b6 as Pr,b7 as Fr,b8 as Rr,b9 as jr,ba as Ir,bb as Lr,bc as Dr,bd as Vr,be as Br,bf as zr}from"./index.7f890236.js";import{u as Hr,B as mn,a as pn,b as Nr,c as Ur}from"./index.d7426c3e.js";import{M as wn}from"./EncodingSelect.854b6f8f.js";import{f as qr,a as bn,b as Wr,c as Kr,d as Gr,e as Jr,g as Xr,h as Zr,i as Qr,j as Yr,k as eo,l as to,o as no}from"./api.30e3c31b.js";import{u as ro,g as oo,a as ao,b as io}from"./useUtil.e404e63a.js";import{A as so,F as vn,C as lo,a as co,B as uo,b as ho,T as go,c as Rt}from"./index.7c9c9934.js";import{R as fo}from"./index.5e4d5f4e.js";import{M as Ct}from"./FolderTree.60d81fe7.js";const mo=(e,...t)=>{},ct=new Map,po=(e,t)=>{ct.set(e,t)},yn=e=>{window.scroll({top:ct.get(e)||0,behavior:"smooth"}),mo("recoverScroll",e,ct.get(e))};let Ie;function wo(e,t,r="replaceState"){let o=r==="location"?location.href:location.hash;if(!o.includes("?"))o=`${o}?${e}=${t}`;else if(!o.includes(e))o=`${o}&${e}=${t}`;else{const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;o=o.replace(new RegExp(a),"$1"+e+"="+t+"$3")}r==="location"&&(location.href=o),r==="pushState"&&history.pushState({},"",o),r==="replaceState"&&history.replaceState({},"",o)}function jt(e){for(var t=window.location.search.substring(1),r=t.split("&"),o=0;o<r.length;o++){var a=r[o].split("=");if(a[0]==e)return a[1]}return""}const tt={};let J=1;const Ri=()=>J,bo=()=>{const e=an();J=1,e.type==="pagination"&&wo("page",1),console.log("resetGlobalPage",J)},H=()=>{const{pathname:e}=F(),[,t]=z(u=>qr(u,Ve())),r=an();r.type==="pagination"&&jt("page")&&(J=parseInt(jt("page")));const[,o]=z(u=>{const h={index:u==null?void 0:u.index,size:u==null?void 0:u.size};return bn(u==null?void 0:u.path,Ve(),h.index,h.size,u==null?void 0:u.force,new pt.CancelToken(function(w){Ie=w}))}),a=(u,h=!0,f=!1)=>{f&&(u=ee(e(),u)),h?tt[u]=!0:delete tt[u]};let i=!1;const s=(u,h,f)=>{Ie==null||Ie(),i=h!=null?h:!1,d(""),tt[u]?c(u,J,void 0,void 0,f):l(u)},l=async u=>{T.setState(x.FetchingObj);const h=await t(u);Et(h,f=>{var w;T.setObj(f),T.setProvider(f.provider),f.is_dir?(a(u),c(u,J)):(T.setReadme(f.readme),T.setRelated((w=f.related)!=null?w:[]),T.setRawUrl(f.raw_url),T.setState(x.File))},d)},c=async(u,h,f,w=!1,p)=>{f||(f=r.size),f!==void 0&&r.type==="all"&&(f=void 0),J=h!=null?h:1,T.setState(w?x.FetchingMore:x.FetchingObjs);const $=await o({path:u,index:h,size:f,force:p});Et($,_=>{var M;w?jn(_.content):(T.setObjs((M=_.content)!=null?M:[]),T.setTotal(_.total)),T.setReadme(_.readme),T.setWrite(_.write),T.setProvider(_.provider),T.setState(x.Folder),w&&(h!=null?h:1)>1||yn(u)},d)},d=(u,h)=>{h===403?(T.setState(x.NeedPassword),i&&B.error(u)):T.setErr(u)},g=(u,h,f=!1)=>{c(e(),u,h,f)};return{handlePathChange:s,setPathAs:a,refresh:(u,h)=>{s(e(),u,h)},pageChange:g,loadMore:()=>{g(J+1,void 0,!0)},allLoaded:()=>J>=Math.ceil(k.total/r.size)}};function Le(e){return e==null||e===""}function vo(e){return e==null}async function yo(e,t){let r="/downloads/alist";const o=await pt.post(e,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.getGlobalOption",params:["token:"+t]});return console.log(o),o.status===200&&(Le(o.data.result.dir)||(r=o.data.result.dir),r=r.endsWith("/")?r.slice(0,-1):r),r}const _o=()=>{const{rawLinks:e}=ro(),t=O(),{pathname:r}=F();return{batchDownloadSelected:()=>{e(!0).forEach(a=>{window.open(a,"_blank")})},sendToAria2:async()=>{const o=de(),a=async(l,c)=>{var d;if(c.is_dir){const g=await bn(ee(r(),l,c.name),Ve());if(g.code!==200)return g.message;const u=[];for(const h of(d=g.data.content)!=null?d:[]){const f=await a(ee(l,c.name),h);if(typeof f=="string")return f;u.push(...f)}return u}else return[{path:ee(l,c.name),dir:l,url:oo(ee(r(),l),c,"direct",!0),name:c.name}]},{aria2_rpc_url:i,aria2_rpc_secret:s}=lt;if(!i){B.warning(t("home.toolbar.aria2_not_set"));return}try{let l="/downloads/alist";l=await yo(i,s);let c=!1;B.info(`${t("home.package_download.fetching_struct")}`);for(const d of o){const g=await a("",d);if(typeof g!="object"||g.length===void 0)return B.error(`${t("home.package_download.fetching_struct_failed")}: ${g}`),g;for(let u=0;u<g.length;u++){if(Le(g[u].path)||vo(g[u].dir)||Le(g[u].url)||Le(g[u].name)){B.error(`${t("home.package_download.fetching_struct_failed")}: ${JSON.stringify(g[u])}`);continue}c||(c=!0,B.info(`${t("home.package_download.downloading")}`));const h=await pt.post(i,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+s,[g[u].url],{out:g[u].name,dir:l+g[u].dir,"check-certificate":"false"}]});console.log(h)}}B.success(t("home.toolbar.send_aria2_success"))}catch(l){console.error(l),B.error(`failed to send to aria2: ${l}`)}}}},Xe=e=>{var l;const[t,r]=N((l=e.defaultValue)!=null?l:""),o=O();let a;const i=()=>{const c=t().lastIndexOf(".");setTimeout(()=>{c>0&&e.isRenamingFile?a.setSelectionRange(0,c):a.select()},10)};Ge(()=>{a&&(a.focus(),i()),A(()=>{a&&a.setSelectionRange(0,0)})});const s=()=>{var c;if(!t()){B.warning(o("global.empty_input"));return}(c=e.onSubmit)==null||c.call(e,t()),r("")};return n(ie,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[n(re,{}),n(oe,{get children(){return[n(Z,{get children(){return o(e.title)}}),n(ae,{get children(){return[n(E,{get when(){return e.topSlot},get children(){return e.topSlot}}),n(E,{get when(){return e.type==="text"},get fallback(){return n(Be,{id:"modal-input",get type(){return e.type},get value(){return t()},ref:c=>a=c,onInput:c=>{r(c.currentTarget.value)},onFocus:i,onKeyDown:c=>{c.key==="Enter"&&s()}})},get children(){return n(In,{id:"modal-input",get value(){return t()},ref:c=>a=c,onInput:c=>{r(c.currentTarget.value)},onFocus:i})}}),n(E,{get when(){return e.tips},get children(){return n(Ln,{get children(){return e.tips}})}})]}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return o("global.cancel")}}),n(j,{get loading(){return e.loading},onClick:()=>s(),get children(){return o("global.ok")}})]}})]}})]}})},$o=()=>{const{pathname:e}=F(),t=fe(()=>["",...e().split("/").filter(Boolean)]),r=O(),{setPathAs:o}=H();return n(ln,{class:"nav",w:"$full",get children(){return n($e,{get each(){return t()},children:(a,i)=>{const s=fe(()=>i()===t().length-1),l=t().slice(0,i()+1).join("/"),c=Dn(l);let d=()=>a;return d()===""&&(d=()=>me("home_icon")+r("manage.sidemenu.home")),n(Vn,{class:"nav-item",get children(){return[n(Bn,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:wt(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return s()},get as(){return s()?void 0:sn},get href(){return zn(c)},onMouseEnter:()=>o(l),children:d}),n(E,{get when(){return!s()},get children(){return n(Hn,{class:"nav-separator"})}})]}})}})}})},So=Te(()=>Pe(()=>import("./Folder.43598688.js").then(e=>e.F),["assets/Folder.43598688.js","assets/Folder.b511ba9e.css","assets/index.7f890236.js","assets/index.d81a3e4b.css","assets/useUtil.e404e63a.js","assets/api.30e3c31b.js","assets/Paginator.330d6c2f.js","assets/index.7c9c9934.js","assets/icon.e5bb58a1.js","assets/index.d7426c3e.js"])),Co=Te(()=>Pe(()=>import("./File.c4e7c7a9.js").then(e=>e.a),["assets/File.c4e7c7a9.js","assets/index.7f890236.js","assets/index.d81a3e4b.css","assets/useUtil.e404e63a.js","assets/api.30e3c31b.js","assets/icon.e5bb58a1.js","assets/index.d7426c3e.js","assets/index.7c9c9934.js"])),xo=Te(()=>Pe(()=>import("./Password.a2f08523.js"),["assets/Password.a2f08523.js","assets/index.7f890236.js","assets/index.d81a3e4b.css","assets/index.7c9c9934.js","assets/index.d7426c3e.js","assets/EncodingSelect.854b6f8f.js","assets/useUtil.e404e63a.js","assets/api.30e3c31b.js","assets/index.5e4d5f4e.js","assets/FolderTree.60d81fe7.js"]));let It=!0;const ko=()=>{const e=Fe("white","$neutral3"),{pathname:t}=F(),{handlePathChange:r}=H();let o=t();return Ge(bt(t,a=>{Hr(),It||bo(),It=!1,po(o,window.scrollY),r(a),o=a})),n(Q,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return n(vt,{get fallback(){return n(ze,{})},get children(){return n(Je,{get children(){return[n(K,{get when(){return k.err},get children(){return n(Nn,{get msg(){return k.err},disableColor:!0})}}),n(K,{get when(){return[x.FetchingObj,x.FetchingObjs].includes(k.state)},get children(){return n(ze,{})}}),n(K,{get when(){return k.state===x.NeedPassword},get children(){return n(xo,{})}}),n(K,{get when(){return[x.Folder,x.FetchingMore].includes(k.state)},get children(){return n(So,{})}}),n(K,{get when(){return k.state===x.File},get children(){return n(Co,{})}})]}})}})}})},Oo=()=>{const e=Fe("white","$neutral3"),{proxyLink:t}=ao(),{pathname:r}=F(),o=fe(bt(()=>k.state,()=>{if(![x.FetchingMore,x.Folder,x.File].includes(k.state))return"";if([x.FetchingMore,x.Folder].includes(k.state)){const s=k.objs.find(l=>l.name.toLowerCase()==="readme.md");if(s)return t(s,!0)}return k.readme?k.readme:""})),a=async s=>{let l={content:s};return/^https?:\/\//g.test(s)&&(l=await Wr(s)),setTimeout(()=>{yn(r())}),l},[i]=Un(o,a);return n(E,{get when(){return o()},get children(){return n(Re,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return e()},shadow:"$lg",get children(){return n(qn,{get loading(){return i.loading},get children(){return n(wn,{get children(){var s;return(s=i())==null?void 0:s.content}})}})}})}})},_n=e=>{const t=me("home_container");return n(Je,{get fallback(){return n(Re,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return n(K,{when:t==="hope_container",get children(){return n(Wn,{get children(){return e.children}})}})}})},Mo=()=>(F(),n(ln,{class:"nav",w:"$full",get children(){return me("home_icon")+"\u64AD\u653E\u5386\u53F2"}})),Eo=pe('<a class="hope-c-PJLV-ikoJJtX-css"></a>'),Ao=pe('<div style="width: 100%; opacity: 1; --motion-scale: 1; transform: scale(var(--motion-scale));"><svg fill="currentColor" stroke-width="0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="icon hope-icon hope-c-XNyZK hope-c-PJLV hope-c-PJLV-idBSAKG-css"><path d="M9.293 0H4a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4.707A1 1 0 0013.707 4L10 .293A1 1 0 009.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 01-1-1zM6 6.883a.5.5 0 01.757-.429l3.528 2.117a.5.5 0 010 .858l-3.528 2.117a.5.5 0 01-.757-.43V6.884z"></path></svg></div>'),Lt=/(.+)\/([^/]+)$/;function Dt(e,t){if(e&&e.times){const r=[];for(const a in e.times)if(e.times.hasOwnProperty(a)){const i=a,s=i.match(Lt),l=s[1];if(s[2],r.length==0)r.push({videoPath:i});else{let c=!1;for(let d=0;d<r.length;d++){const g=r[d];if(l==g.videoPath.match(Lt)[1]){c=!0,g.videoPath=i;break}}c||r.push({videoPath:i})}}const o=[];for(let a=0;a<r.length;a++){const i=r[a].videoPath;o.push((()=>{const s=Eo.cloneNode(!0);return Kn(s,"href",i),Se(s,i),s})())}t(o.slice().reverse())}}const To=()=>{const e=Fe("white","$neutral3"),[t,r]=N([]),o=localStorage.getItem("artplayer_settings");let a={times:{}};return o!=null&&(a=JSON.parse(o)),Dt(a,r),Ge(()=>{const i=setInterval(()=>{const s=localStorage.getItem("artplayer_settings");let l={times:{}};s!=null&&(l=JSON.parse(s)),Dt(l,r)},5e3);return()=>clearInterval(i)}),n(Q,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$4",get children(){return t().map(i=>(()=>{const s=Ao.cloneNode(!0);return s.firstChild,Se(s,i,null),s})())}})},Po=()=>n(_n,{get children(){return n(Q,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[n($o,{}),n(ko,{}),n(Mo,{}),n(To,{}),n(Oo,{})]}})}}),Fo=pe("<span>|</span>"),Ro=()=>{const e=O();return n(Q,{class:"footer",w:"$full",py:"$4",get children(){return n(U,{spacing:"$1",get children(){return[n(Gn,{href:"https://github.com/Xhofe/alist",external:!0,get children(){return e("home.footer.powered_by")}}),Fo.cloneNode(!0),n(so,{as:sn,get href(){return He.is_guest(Ne())?"/@login":"/@manage"},get children(){return e(He.is_guest(Ne())?"login.login":"home.footer.manage")}})]}})}})},Vt={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},Ce="^\\s*",xe="\\s*$",le="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",ce="([0-9A-Fa-f])",ue="([0-9A-Fa-f]{2})",jo=new RegExp(`${Ce}rgb\\s*\\(${le},${le},${le}\\)${xe}`),Io=new RegExp(`${Ce}rgba\\s*\\(${le},${le},${le},${le}\\)${xe}`),Lo=new RegExp(`${Ce}#${ce}${ce}${ce}${xe}`),Do=new RegExp(`${Ce}#${ue}${ue}${ue}${xe}`),Vo=new RegExp(`${Ce}#${ce}${ce}${ce}${ce}${xe}`),Bo=new RegExp(`${Ce}#${ue}${ue}${ue}${ue}${xe}`);function L(e){return parseInt(e,16)}function $n(e){try{let t;if(t=Do.exec(e))return[L(t[1]),L(t[2]),L(t[3]),1];if(t=jo.exec(e))return[X(t[1]),X(t[5]),X(t[9]),1];if(t=Io.exec(e))return[X(t[1]),X(t[5]),X(t[9]),nt(t[13])];if(t=Lo.exec(e))return[L(t[1]+t[1]),L(t[2]+t[2]),L(t[3]+t[3]),1];if(t=Bo.exec(e))return[L(t[1]),L(t[2]),L(t[3]),nt(L(t[4])/255)];if(t=Vo.exec(e))return[L(t[1]+t[1]),L(t[2]+t[2]),L(t[3]+t[3]),nt(L(t[4]+t[4])/255)];if(e in Vt)return $n(Vt[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function zo(e){return e>1?1:e<0?0:e}function Bt(e,t,r,o){return`rgba(${X(e)}, ${X(t)}, ${X(r)}, ${zo(o)})`}function zt(e,t){const[r,o,a,i=1]=Array.isArray(e)?e:$n(e);return t.alpha?Bt(r,o,a,t.alpha):Bt(r,o,a,i)}function nt(e){const t=Math.round(Number(e)*100)/100;return t>1?1:t<0?0:t}function X(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const Ho={list:vn,grid:mn,image:pn},No=()=>{const e=O();return n($t,{get children(){return[n(yt,{as:Jn,get color(){return Me()},get bgColor(){return zt(Me(),{alpha:.15})},get _hover(){return{bgColor:zt(Me(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return n(Je,{get children(){return[n(K,{get when(){return Ye()==="list"},get children(){return n(vn,{})}}),n(K,{get when(){return Ye()==="grid"},get children(){return n(mn,{})}}),n(K,{get when(){return Ye()==="image"},get children(){return n(pn,{})}})]}})}}),n(_t,{get children(){return n($e,{get each(){return Object.entries(Ho)},children:t=>n(he,{get icon(){return n(cn,{get component(){return t[1]}})},onSelect:()=>{Xn(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})},Ze=typeof window<"u"?window.navigator.userAgent:"";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Ze);/^((?!chrome|android).)*safari/i.test(Ze);/MicroMessenger/i.test(Ze);/MSIE|Trident/i.test(Ze);var nn,rn,on;const Uo=(on=(rn=(nn=window==null?void 0:window.navigator)==null?void 0:nn.platform)!=null?rn:"")==null?void 0:on.includes("Mac"),qo=()=>{const e=me("logo").split(`
`),t=Fe(e[0],e.pop());return n(un,{class:"header",w:"$full",get children(){return n(_n,{get children(){return n(U,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[n(U,{class:"header-left",h:"44px",get children(){return n(Zn,{get src(){return t()},h:"$full",w:"auto",get fallback(){return n(Qn,{})}})}}),n(U,{class:"header-right",spacing:"$2",get children(){return n(E,{get when(){return k.state===x.Folder},get children(){return[n(E,{get when(){return me("search_index")!=="none"},get children(){return n(U,{bg:"$neutral4",w:"$32",p:"$2",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",_hover:{borderColor:"$info6"},onClick:()=>{b.emit("tool","search")},get children(){return[n(St,{as:Nr}),n(U,{get children(){return[Ue(()=>Uo?n(et,{children:"Cmd"}):n(et,{children:"Ctrl"})),n(et,{children:"K"})]}})]}})}}),n(No,{})]}})}})]}})}})}})};function Wo(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}function Ko(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)}function ji(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M11 7H6a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-5M10 14L20 4M15 4h5v5"/>'},e)}function Go(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)}function Jo(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)}function Xo(e){return se({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M11 8v6h1V8h2.5l-3-3-3 3zM1 3h1.5v1H1V3zM3 3h1.5v1H3V3zM5 3h1v1.5H5V3zM1 6.5h1V8H1V6.5zM2.5 7H4v1H2.5V7zM4.5 7H6v1H4.5V7zM1 4.5h1V6H1V4.5zM5 5h1v1.5H5V5zM5 11v3H2v-3h3zm1-1H1v5h5v-5z"/>'},e)}function Ii(e){return se({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M14 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zM2 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zm1.5 5.5A1.5 1.5 0 005 13v2c0 .55.45 1 1 1s1-.45 1-1v-2h2v2c0 .55.45 1 1 1s1-.45 1-1v-2a1.5 1.5 0 001.5-1.5V6h-9v5.5zM12.472 5a4.5 4.5 0 00-2.025-3.276l.5-1.001a.5.5 0 00-.895-.447L9.55 1.28l-.13-.052a4.504 4.504 0 00-2.84 0l-.13.052L5.948.276a.5.5 0 00-.895.447l.5 1.001A4.499 4.499 0 003.528 5v.5H12.5V5h-.028zM6.5 4a.5.5 0 01-.001-1h.002A.5.5 0 016.5 4zm3 0a.5.5 0 01-.001-1h.003a.5.5 0 01-.001 1z"/>'},e)}function Zo(e){return se({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>'},e)}const Y={rename:{icon:lo,color:"$accent9"},copy:{icon:Ko,color:"$success9"},move:{icon:Go,color:"$warning9"},delete:{icon:Yn,color:"$danger9"},copy_link:{icon:Jo,color:"$info9"},mkdir:{icon:co,p:!0},recursive_move:{icon:Xo,p:!0},remove_empty_directory:{icon:Zo,p:!0},batch_rename:{icon:uo,p:!0},new_file:{icon:ho,p:!0},cancel_select:{icon:go},download:{icon:er,color:"$primary9"}},We=e=>{const t=tr.findIndex(o=>o===e.name);if(t!==-1&&!He.can(Ne(),t))return null;const r=O();return n(dn,{placement:"top",withArrow:!0,get label(){return r(`home.toolbar.${e.name}`)},get children(){return n(St,ve({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:wt()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=Y[e.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=Y[e.name])==null?void 0:o.icon},get color(){var o;return(o=Y[e.name])==null?void 0:o.color}},e))}})},V=e=>{const t=O();return n(dn,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return n(St,ve({get color(){return Me()},get _hover(){return{bgColor:Me(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},Qo=()=>{const e=O(),{copySelectedPreviewPage:t,copySelectedRawLink:r}=io(),o="neutral";return n($t,{placement:"top",offset:10,get children(){return[n(yt,{as:We,name:"copy_link"}),n(_t,{get children(){return[n(he,{colorScheme:o,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),n(he,{colorScheme:o,onSelect:()=>{r()},get children(){return e("home.toolbar.down_link")}}),n(he,{colorScheme:o,onSelect:()=>{r(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})},Yo=pe("<p></p>"),ea=()=>{const e=O(),t="neutral",{batchDownloadSelected:r,sendToAria2:o}=_o();return n($t,{placement:"top",offset:10,get children(){return[n(yt,{as:We,name:"download"}),n(_t,{get children(){return[n(he,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.batch_download")}}),n(E,{get when(){return He.is_admin(Ne())||nr("package_download")},get children(){return n(he,{colorScheme:t,onSelect:()=>{b.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}})}}),n(he,{colorScheme:t,onSelect:o,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},ta=Te(()=>Pe(()=>import("./PackageDownload.50663e1d.js"),["assets/PackageDownload.50663e1d.js","assets/index.7f890236.js","assets/index.d81a3e4b.css","assets/api.30e3c31b.js","assets/useUtil.e404e63a.js"])),na=()=>{const e=O(),t=l=>{l==="package_download"&&o()};b.on("tool",t),A(()=>{b.off("tool",t)});const{isOpen:r,onOpen:o,onClose:a}=P(),[i,s]=N("pre_tips");return n(ie,{blockScrollOnMount:!1,get opened(){return r()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[n(re,{}),n(oe,{get children(){return[n(Z,{get children(){return e("home.toolbar.package_download")}}),n(vt,{get fallback(){return n(ze,{})},get children(){return n(E,{get when(){return i()==="pre_tips"},get fallback(){return n(ta,{onClose:a})},get children(){return[n(ae,{get children(){const l=Yo.cloneNode(!0);return Se(l,()=>e("home.toolbar.pre_package_download-tips")),l}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{onClick:a,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(j,{colorScheme:"info",onClick:()=>{s("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})};function Sn(e,t){e.indexOf(t)===-1&&e.push(t)}function ra(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Cn=(e,t,r)=>Math.min(Math.max(r,e),t),q={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Ee=e=>typeof e=="number",be=e=>Array.isArray(e)&&!Ee(e[0]),oa=(e,t,r)=>{const o=t-e;return((r-e)%o+o)%o+e};function aa(e,t){return be(e)?e[oa(0,e.length,t)]:e}const xn=(e,t,r)=>-r*e+r*t+e,kn=()=>{},te=e=>e,xt=(e,t,r)=>t-e===0?1:(r-e)/(t-e);function On(e,t){const r=e[e.length-1];for(let o=1;o<=t;o++){const a=xt(0,t,o);e.push(xn(r,1,a))}}function ia(e){const t=[0];return On(t,e-1),t}function sa(e,t=ia(e.length),r=te){const o=e.length,a=o-t.length;return a>0&&On(t,a),i=>{let s=0;for(;s<o-2&&!(i<t[s+1]);s++);let l=Cn(0,1,xt(t[s],t[s+1],i));return l=aa(r,s)(l),xn(e[s],e[s+1],l)}}const Mn=e=>Array.isArray(e)&&Ee(e[0]),ut=e=>typeof e=="object"&&Boolean(e.createAnimation),Ae=e=>typeof e=="function",la=e=>typeof e=="string",rt={ms:e=>e*1e3,s:e=>e/1e3},En=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,ca=1e-7,ua=12;function da(e,t,r,o,a){let i,s,l=0;do s=t+(r-t)/2,i=En(s,o,a)-e,i>0?r=s:t=s;while(Math.abs(i)>ca&&++l<ua);return s}function ke(e,t,r,o){if(e===t&&r===o)return te;const a=i=>da(i,0,1,e,r);return i=>i===0||i===1?i:En(a(i),t,o)}const ha=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const o=r*e,a=t==="end"?Math.floor(o):Math.ceil(o);return Cn(0,1,a/e)},Ht={ease:ke(.25,.1,.25,1),"ease-in":ke(.42,0,1,1),"ease-in-out":ke(.42,0,.58,1),"ease-out":ke(0,0,.58,1)},ga=/\((.*?)\)/;function Nt(e){if(Ae(e))return e;if(Mn(e))return ke(...e);if(Ht[e])return Ht[e];if(e.startsWith("steps")){const t=ga.exec(e);if(t){const r=t[1].split(",");return ha(parseFloat(r[0]),r[1].trim())}}return te}class fa{constructor(t,r=[0,1],{easing:o,duration:a=q.duration,delay:i=q.delay,endDelay:s=q.endDelay,repeat:l=q.repeat,offset:c,direction:d="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=te,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((u,h)=>{this.resolve=u,this.reject=h}),o=o||q.easing,ut(o)){const u=o.createAnimation(r);o=u.easing,r=u.keyframes||r,a=u.duration||a}this.repeat=l,this.easing=be(o)?te:Nt(o),this.updateDuration(a);const g=sa(r,c,be(o)?o.map(Nt):te);this.tick=u=>{var h;i=i;let f=0;this.pauseTime!==void 0?f=this.pauseTime:f=(u-this.startTime)*this.rate,this.t=f,f/=1e3,f=Math.max(f-i,0),this.playState==="finished"&&this.pauseTime===void 0&&(f=this.totalDuration);const w=f/this.duration;let p=Math.floor(w),$=w%1;!$&&w>=1&&($=1),$===1&&p--;const _=p%2;(d==="reverse"||d==="alternate"&&_||d==="alternate-reverse"&&!_)&&($=1-$);const M=f>=this.totalDuration?1:Math.min($,1),S=g(this.easing(M));t(S),this.pauseTime===void 0&&(this.playState==="finished"||f>=this.totalDuration+s)?(this.playState="finished",(h=this.resolve)===null||h===void 0||h.call(this,S)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class ma{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const ot=new WeakMap;function An(e){return ot.has(e)||ot.set(e,{transforms:[],values:new Map}),ot.get(e)}function pa(e,t){return e.has(t)||e.set(t,new ma),e.get(t)}const wa=["","X","Y","Z"],ba=["translate","scale","rotate","skew"],ye={x:"translateX",y:"translateY",z:"translateZ"},Ut={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},va={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:Ut,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:te},skew:Ut},_e=new Map,Qe=e=>`--motion-${e}`,Ke=["x","y","z"];ba.forEach(e=>{wa.forEach(t=>{Ke.push(e+t),_e.set(Qe(e+t),va[e])})});const ya=(e,t)=>Ke.indexOf(e)-Ke.indexOf(t),_a=new Set(Ke),kt=e=>_a.has(e),$a=(e,t)=>{ye[t]&&(t=ye[t]);const{transforms:r}=An(e);Sn(r,t),e.style.transform=Tn(r)},Tn=e=>e.sort(ya).reduce(Sa,"").trim(),Sa=(e,t)=>`${e} ${t}(var(${Qe(t)}))`,dt=e=>e.startsWith("--"),qt=new Set;function Ca(e){if(!qt.has(e)){qt.add(e);try{const{syntax:t,initialValue:r}=_e.has(e)?_e.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch{}}}const at=(e,t)=>document.createElement("div").animate(e,t),Wt={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{at({opacity:[1]})}catch{return!1}return!0},finished:()=>Boolean(at({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{at({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},it={},we={};for(const e in Wt)we[e]=()=>(it[e]===void 0&&(it[e]=Wt[e]()),it[e]);const xa=.015,ka=(e,t)=>{let r="";const o=Math.round(t/xa);for(let a=0;a<o;a++)r+=e(xt(0,o-1,a))+", ";return r.substring(0,r.length-2)},Kt=(e,t)=>Ae(e)?we.linearEasing()?`linear(${ka(e,t)})`:q.easing:Mn(e)?Oa(e):e,Oa=([e,t,r,o])=>`cubic-bezier(${e}, ${t}, ${r}, ${o})`;function Ma(e,t){for(let r=0;r<e.length;r++)e[r]===null&&(e[r]=r?e[r-1]:t());return e}const Ea=e=>Array.isArray(e)?e:[e];function ht(e){return ye[e]&&(e=ye[e]),kt(e)?Qe(e):e}const Oe={get:(e,t)=>{t=ht(t);let r=dt(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&r!==0){const o=_e.get(t);o&&(r=o.initialValue)}return r},set:(e,t,r)=>{t=ht(t),dt(t)?e.style.setProperty(t,r):e.style[t]=r}};function Aa(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function Ta(e,t){var r;let o=(t==null?void 0:t.toDefaultUnit)||te;const a=e[e.length-1];if(la(a)){const i=((r=a.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";i&&(o=s=>s+i)}return o}function Pa(){return window.__MOTION_DEV_TOOLS_RECORD}function Fa(e,t,r,o={},a){const i=Pa(),s=o.record!==!1&&i;let l,{duration:c=q.duration,delay:d=q.delay,endDelay:g=q.endDelay,repeat:u=q.repeat,easing:h=q.easing,direction:f,offset:w,allowWebkitAcceleration:p=!1}=o;const $=An(e),_=kt(t);let M=we.waapi();_&&$a(e,t);const S=ht(t),C=pa($.values,S),I=_e.get(S);return Aa(C.animation,!(ut(h)&&C.generator)&&o.record!==!1),()=>{const W=()=>{var v,R;return(R=(v=Oe.get(e,S))!==null&&v!==void 0?v:I==null?void 0:I.initialValue)!==null&&R!==void 0?R:0};let m=Ma(Ea(r),W);const y=Ta(m,I);if(ut(h)){const v=h.createAnimation(m,t!=="opacity",W,S,C);h=v.easing,m=v.keyframes||m,c=v.duration||c}if(dt(S)&&(we.cssRegisterProperty()?Ca(S):M=!1),_&&!we.linearEasing()&&(Ae(h)||be(h)&&h.some(Ae))&&(M=!1),M){I&&(m=m.map(D=>Ee(D)?I.toDefaultUnit(D):D)),m.length===1&&(!we.partialKeyframes()||s)&&m.unshift(W());const v={delay:rt.ms(d),duration:rt.ms(c),endDelay:rt.ms(g),easing:be(h)?void 0:Kt(h,c),direction:f,iterations:u+1,fill:"both"};l=e.animate({[S]:m,offset:w,easing:be(h)?h.map(D=>Kt(D,c)):void 0},v),l.finished||(l.finished=new Promise((D,je)=>{l.onfinish=D,l.oncancel=je}));const R=m[m.length-1];l.finished.then(()=>{Oe.set(e,S,R),l.cancel()}).catch(kn),p||(l.playbackRate=1.000001)}else if(a&&_)m=m.map(v=>typeof v=="string"?parseFloat(v):v),m.length===1&&m.unshift(parseFloat(W())),l=new a(v=>{Oe.set(e,S,y?y(v):v)},m,Object.assign(Object.assign({},o),{duration:c,easing:h}));else{const v=m[m.length-1];Oe.set(e,S,I&&Ee(v)?I.toDefaultUnit(v):v)}return s&&i(e,t,m,{duration:c,delay:d,easing:h,repeat:u,offset:w},"motion-one"),C.setAnimation(l),l}}const Ra=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function ja(e,t){var r;return typeof e=="string"?t?((r=t[e])!==null&&r!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function Pn(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r}const Ia={any:0,all:1};function La(e,t,{root:r,margin:o,amount:a="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const i=ja(e),s=new WeakMap,l=d=>{d.forEach(g=>{const u=s.get(g.target);if(g.isIntersecting!==Boolean(u))if(g.isIntersecting){const h=t(g);Ae(h)?s.set(g.target,h):c.unobserve(g.target)}else u&&(u(g),s.delete(g.target))})},c=new IntersectionObserver(l,{root:r,rootMargin:o,threshold:typeof a=="number"?a:Ia[a]});return i.forEach(d=>c.observe(d)),()=>c.disconnect()}function Da(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!Va(e,t):e!==t}function Va(e,t){const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}function Ba(e){return typeof e=="object"}function Gt(e,t){if(Ba(e))return e;if(e&&t)return t[e]}let ne;function za(){if(!ne)return;const e=ne.sort(Na).map(Ua);e.forEach(Jt),e.forEach(Jt),ne=void 0}function st(e){ne?Sn(ne,e):(ne=[e],requestAnimationFrame(za))}function Ha(e){ne&&ra(ne,e)}const Na=(e,t)=>e.getDepth()-t.getDepth(),Ua=e=>e.animateUpdates(),Jt=e=>e.next(),Xt=(e,t)=>new CustomEvent(e,{detail:{target:t}});function gt(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:r}}))}function Zt(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:r}}))}const qa={isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:r},{inViewOptions:o={}})=>{const{once:a}=o,i=Pn(o,["once"]);return La(e,s=>{if(t(),Zt(e,"viewenter",s),!a)return l=>{r(),Zt(e,"viewleave",l)}},i)}},Qt=(e,t,r)=>o=>{o.pointerType&&o.pointerType!=="mouse"||(r(),gt(e,t,o))},Wa={isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:r})=>{const o=Qt(e,"hoverstart",t),a=Qt(e,"hoverend",r);return e.addEventListener("pointerenter",o),e.addEventListener("pointerleave",a),()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",a)}}},Ka={isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:r})=>{const o=i=>{r(),gt(e,"pressend",i),window.removeEventListener("pointerup",o)},a=i=>{t(),gt(e,"pressstart",i),window.addEventListener("pointerup",o)};return e.addEventListener("pointerdown",a),()=>{e.removeEventListener("pointerdown",a),window.removeEventListener("pointerup",o)}}},De={inView:qa,hover:Wa,press:Ka},Yt=["initial","animate",...Object.keys(De),"exit"],ft=new WeakMap;function Ga(e={},t){let r,o=t?t.getDepth()+1:0;const a={initial:!0,animate:!0},i={},s={};for(const p of Yt)s[p]=typeof e[p]=="string"?e[p]:t==null?void 0:t.getContext()[p];const l=e.initial===!1?"animate":"initial";let c=Gt(e[l]||s[l],e.variants)||{},d=Pn(c,["transition"]);const g=Object.assign({},d);function*u(){var p,$;const _=d;d={};const M={};for(const m of Yt){if(!a[m])continue;const y=Gt(e[m]);if(!!y)for(const v in y)v!=="transition"&&(d[v]=y[v],M[v]=Ra(($=(p=y.transition)!==null&&p!==void 0?p:e.transition)!==null&&$!==void 0?$:{},v))}const S=new Set([...Object.keys(d),...Object.keys(_)]),C=[];S.forEach(m=>{var y;d[m]===void 0&&(d[m]=g[m]),Da(_[m],d[m])&&((y=g[m])!==null&&y!==void 0||(g[m]=Oe.get(r,m)),C.push(Fa(r,m,d[m],M[m],fa)))}),yield;const I=C.map(m=>m()).filter(Boolean);if(!I.length)return;const W=d;r.dispatchEvent(Xt("motionstart",W)),Promise.all(I.map(m=>m.finished)).then(()=>{r.dispatchEvent(Xt("motioncomplete",W))}).catch(kn)}const h=(p,$)=>()=>{a[p]=$,st(w)},f=()=>{for(const p in De){const $=De[p].isActive(e),_=i[p];$&&!_?i[p]=De[p].subscribe(r,{enable:h(p,!0),disable:h(p,!1)},e):!$&&_&&(_(),delete i[p])}},w={update:p=>{!r||(e=p,f(),st(w))},setActive:(p,$)=>{!r||(a[p]=$,st(w))},animateUpdates:u,getDepth:()=>o,getTarget:()=>d,getOptions:()=>e,getContext:()=>s,mount:p=>(r=p,ft.set(r,w),f(),()=>{ft.delete(r),Ha(w);for(const $ in i)i[$]()}),isMounted:()=>Boolean(r)};return w}function Ja(e){const t={},r=[];for(let o in e){const a=e[o];kt(o)&&(ye[o]&&(o=ye[o]),r.push(o),o=Qe(o));let i=Array.isArray(a)?a[0]:a;const s=_e.get(o);s&&(i=Ee(a)?s.toDefaultUnit(a):a),t[o]=i}return r.length&&(t.transform=Tn(r)),t}const Xa={initial:()=>!0,addCleanup:A,addMount:gn},mt=hn(),Fn=hn(Xa);function Za(e,t,r,o){const{addCleanup:a,addMount:i,initial:s}=r,l=Ga(s()?t():{...t(),initial:!1},o);return i(rr.bind(void 0,or(),()=>{a(l.mount(e())),Ge(()=>l.update(t()))})),l}const Qa=/([^:; ]*):\s*([^;]*)/g;function en(e){const t={};let r;for(;r=Qa.exec(e);)t[r[1]]=r[2];return t}function Ya(e,t){if(typeof e=="object"&&typeof t=="object")return{...e,...t};if(typeof e=="string"&&typeof t=="string")return`${e};${t}`;const r=typeof e=="object"?e:en(e),o=typeof t=="object"?t:en(t);return{...r,...o}}const tn=e=>{const[t,,r]=ar(e,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),o=Za(()=>i,()=>({...t}),At(Fn),At(mt)),a=Ja(o.getTarget());let i;return n(mt.Provider,{value:o,get children(){return n(cn,ve({ref:s=>{var l;i=s,(l=e.ref)==null||l.call(e,s)},get component(){return fn(()=>e.tag||"div")},get style(){return Ue(()=>!!e.style,!0)()?Ya(e.style,a):a},get["on:motionstart"](){return e.onMotionStart},get["on:motioncomplete"](){return e.onMotionComplete},get["on:hoverstart"](){return e.onHoverStart},get["on:hoverend"](){return e.onHoverEnd},get["on:pressstart"](){return e.onPressStart},get["on:pressend"](){return e.onPressEnd},get["on:viewenter"](){return e.onViewEnter},get["on:viewleave"](){return e.onViewLeave}},r))}})},Ot=new Proxy(tn,{get:(e,t)=>r=>(delete r.tag,n(tn,ve(r,{tag:t})))}),ei=e=>(e=Array.isArray(e)?e[0]:e,e instanceof Element?e:void 0),ti=(e,t)=>{const r={once:!0};e.addEventListener("motioncomplete",t,r),A(e.removeEventListener.bind(e,"motioncomplete",t,r))},ni=e=>{let{initial:t=!0}=e;gn(()=>t=!0);let r=!1,o=[],a=[],i=[];return A(()=>{i.concat(a).forEach(s=>s()),a=i=o=[]}),n(Fn.Provider,{value:{addCleanup:s=>a.push(s),addMount:s=>o.push(s),initial:()=>t},get children(){return n(mt.Provider,{value:void 0,get children(){return fn(()=>{const s=ir(()=>e.children),l=fe(()=>ei(s())),[c,d]=N(),[g,u]=N();return sr(bt(l,w=>{i.push(...a),a=[],lr(()=>{e.exitBeforeEnter?(d(),f(()=>!r&&h(w))):(h(w),f())})})),[c,g];function h(w){d(w),o.forEach(p=>p()),o=[]}function f(w){var M;const p=()=>{u(),i.forEach(S=>S()),i=[],w==null||w()},$=u((M=c())!=null?M:g());if(!$)return p();const _=ft.get($);if(!_||!_.getOptions().exit)return p();_.setActive("exit",r=!0),ti($,()=>{r=!1,p()})}})}})}})},ri=()=>{const e=fe(()=>[x.Folder,x.FetchingMore].includes(k.state)&&cr()&&ur());return n(ni,{exitBeforeEnter:!0,get children(){return n(E,{get when(){return e()},get children(){return n(Re,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return Ot.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return n(U,{p:"$2",get bgColor(){return Fe("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[n($e,{each:["rename","move","copy","delete"],children:t=>n(We,{name:t,onClick:()=>{b.emit("tool",t)}})}),n(Qo,{}),n(ea,{}),n(We,{name:"cancel_select",onClick:()=>{dr(!1)}})]}})}})}})}})},oi=()=>{const{isOpen:e,onToggle:t}=P({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),r=fe(()=>e()?"$4":"$5"),o=fe(()=>k.state===x.Folder),{refresh:a}=H();return n(Re,{class:"left-toolbar-box",pos:"fixed",get right(){return r()},get bottom(){return r()},get children(){return n(E,{get when(){return e()},get fallback(){return n(V,{class:"toolbar-toggle",as:Rt,onClick:()=>{t()}})},get children(){return n(Q,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return Ot.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[n(Q,{spacing:"$1",class:"left-toolbar-in",get children(){return[n(E,{get when(){return Ue(()=>!!o(),!0)()&&(Tt("write")||k.write)},get children(){return[n(V,{as:fo,tips:"refresh",onClick:()=>{a(void 0,!0)}}),n(V,{get as(){return Y.new_file.icon},tips:"new_file",onClick:()=>{b.emit("tool","new_file")}}),n(V,{get as(){return Y.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{b.emit("tool","mkdir")}}),n(V,{get as(){return Y.recursive_move.icon},tips:"recursive_move",onClick:()=>{b.emit("tool","recursiveMove")}}),n(V,{get as(){return Y.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{b.emit("tool","removeEmptyDirectory")}}),n(V,{get as(){return Y.batch_rename.icon},tips:"batch_rename",onClick:()=>{b.emit("tool","batchRename")}}),n(V,{as:hr,tips:"upload",onClick:()=>{b.emit("tool","upload")}})]}}),n(E,{get when(){return Ue(()=>!!o(),!0)()&&Tt("offline_download")},get children(){return n(V,{as:gr,pl:"0",tips:"offline_download",onClick:()=>{b.emit("tool","offline_download")}})}}),n(V,{tips:"toggle_checkbox",as:Wo,onClick:fr}),n(V,{as:mr,tips:"local_settings",onClick:()=>{b.emit("tool","local_settings")}})]}}),n(V,{tips:"more",as:Rt,onClick:t})]}})}})}})},ai=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),[o,a]=z(Kr),{pathname:i}=F(),{refresh:s}=H(),l=c=>{c==="copy"&&t()};return b.on("tool",l),A(()=>{b.off("tool",l)}),n(Ct,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const d=await a(i(),c,de().map(g=>g.name));G(d,()=>{s(),r()})}})},ii=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),[o,a]=z(Gr),{pathname:i}=F(),{refresh:s}=H(),l=c=>{c==="move"&&t()};return b.on("tool",l),A(()=>{b.off("tool",l)}),n(Ct,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const d=await a(i(),c,de().map(g=>g.name));G(d,()=>{s(),r()})}})},si=pe("<p></p>"),li=()=>{const e=O(),{isOpen:t,onOpen:r,onClose:o}=P(),[a,i]=z(Jr),{refresh:s}=H(),{pathname:l}=F(),c=d=>{d==="delete"&&r()};return b.on("tool",c),A(()=>{b.off("tool",c)}),n(ie,{blockScrollOnMount:!1,get opened(){return t()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[n(re,{}),n(oe,{get children(){return[n(Z,{get children(){return e("home.toolbar.delete")}}),n(ae,{get children(){const d=si.cloneNode(!0);return Se(d,()=>e("home.toolbar.delete-tips")),d}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(j,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const d=await i(l(),de().map(g=>g.name));G(d,()=>{s(),o()})},get children(){return e("global.confirm")}})]}})]}})]}})},ci=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),o=O(),[a,i]=z(Xr),{pathname:s}=F(),{refresh:l}=H(),c=d=>{if(d==="rename"){if(!pr()){B.warning(o("home.toolbar.only_one-tips"));return}t()}};return b.on("tool",c),A(()=>{b.off("tool",c)}),n(E,{get when(){return e()},get children(){return n(Xe,{title:"home.toolbar.input_new_name",get isRenamingFile(){return!de()[0].is_dir},get opened(){return e()},onClose:r,get defaultValue(){var d,g;return(g=(d=de()[0])==null?void 0:d.name)!=null?g:""},get loading(){return a()},onSubmit:async d=>{const g=await i(ee(s(),de()[0].name),d);G(g,()=>{l(),r()})}})}})},ui=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),[o,a]=z(Zr),{refresh:i}=H(),{pathname:s}=F(),l=c=>{c==="new_file"&&t()};return b.on("tool",l),A(()=>{b.off("tool",l)}),n(Xe,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const d=await a(ee(s(),c),Ve());G(d,()=>{i(),r()})}})},di=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),[o,a]=z(Qr),{pathname:i}=F(),{refresh:s}=H(),l=c=>{c==="mkdir"&&t()};return b.on("tool",l),A(()=>{b.off("tool",l)}),n(Xe,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const d=await a(ee(i(),c));G(d,()=>{s(),r()})}})},hi=pe("<p></p>"),gi=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),{isOpen:o,onOpen:a,onClose:i}=P(),[s,l]=z(Yr),{pathname:c}=F(),{refresh:d}=H(),g=h=>{h==="recursiveMove"&&t()};b.on("tool",g),A(()=>{b.off("tool",g)});const u=O();return[n(ie,{blockScrollOnMount:!1,get opened(){return e()},onClose:()=>r(),size:{"@initial":"xs","@md":"md"},get children(){return[n(re,{}),n(oe,{get children(){return[n(Z,{get children(){return u("home.toolbar.recursive_move")}}),n(ae,{get children(){const h=hi.cloneNode(!0);return Se(h,()=>u("home.toolbar.recursive_move_directory-tips")),h}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{onClick:()=>r(),colorScheme:"neutral",get children(){return u("global.cancel")}}),n(j,{onClick:()=>{r(),a()},colorScheme:"danger",get children(){return u("global.confirm")}})]}})]}})]}}),n(Ct,{get opened(){return o()},onClose:i,get loading(){return s()},onSubmit:async h=>{const f=await l(c(),h);G(f,()=>{d(),i()})}})]},fi=pe("<p></p>"),mi=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),{pathname:o}=F(),[a,i]=z(eo),{refresh:s}=H(),l=d=>{d==="removeEmptyDirectory"&&t()};b.on("tool",l),A(()=>{b.off("tool",l)});const c=O();return n(ie,{blockScrollOnMount:!1,get opened(){return e()},onClose:r,size:{"@initial":"xs","@md":"md"},get children(){return[n(re,{}),n(oe,{get children(){return[n(Z,{get children(){return c("home.toolbar.remove_empty_directory")}}),n(ae,{get children(){const d=fi.cloneNode(!0);return Se(d,()=>c("home.toolbar.remove_empty_directory-tips")),d}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{onClick:r,colorScheme:"neutral",get children(){return c("global.cancel")}}),n(j,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const d=await i(o());G(d,()=>{s(),r()})},get children(){return c("global.confirm")}})]}})]}})]}})},pi=e=>n(Ot.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return n(U,{class:"list-item",w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:wt()}},get children(){return[n(qe,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.src_name},get children(){return e.obj.src_name}}),n(qe,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.new_name},get children(){return e.obj.new_name}})]}})}}),wi=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),{isOpen:o,onOpen:a,onClose:i}=P(),[s,l]=z(to),{pathname:c}=F(),{refresh:d}=H(),[g,u]=N("1"),[h,f]=N(""),[w,p]=N(""),[$,_]=N("string"),[M,S]=N([]),C=O(),I=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),W=y=>{y==="batchRename"&&a()};b.on("tool",W),A(()=>{b.off("tool",W)});const m=()=>{if(!h()||!w()){B.warning(C("global.empty_input"));return}const y=new RegExp(h(),"g");let v;if(g()==="1")v=k.objs.filter(R=>R.name.match(h())).map(R=>({src_name:R.name,new_name:R.name.replace(y,w())}));else{let R=w();v=k.objs.map(D=>{let je="";const Mt=D.name.lastIndexOf(".");Mt!==-1&&(je=D.name.substring(Mt+1));const Rn={src_name:D.name,new_name:h()+R+"."+je};return R=(parseInt(R)+1).toString().padStart(R.length,"0"),Rn})}S(v),t(),i()};return[n(ie,{blockScrollOnMount:!1,get opened(){return o()},onClose:i,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[n(re,{}),n(oe,{get children(){return[n(E,{get when(){return g()==="1"},get children(){return n(Z,{get children(){return C("home.toolbar.regular_rename")}})}}),n(E,{get when(){return g()==="2"},get children(){return n(Z,{get children(){return C("home.toolbar.sequential_renaming_desc")}})}}),n(ae,{get children(){return[n(wr,{defaultValue:"1",style:{margin:"20px 0"},onChange:y=>{u(y),y==="1"?_("string"):y==="2"&&_("number")},get children(){return n(U,{spacing:"$4",get children(){return[n(Pt,{value:"1",get children(){return C("home.toolbar.regex_rename")}}),n(Pt,{value:"2",get children(){return C("home.toolbar.sequential_renaming")}})]}})}}),n(Q,{spacing:"$2",get children(){return[n(Be,{id:"modal-input1",type:"string",get value(){return h()},onInput:y=>{f(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&m()}}),n(Be,{id:"modal-input2",get type(){return $()},get value(){return w()},onInput:y=>{p(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&m()}})]}})]}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{onClick:()=>{u("1"),_("string"),i()},colorScheme:"neutral",get children(){return C("global.cancel")}}),n(j,{onClick:()=>m(),get disabled(){return!h()||!w()},get children(){return C("global.ok")}})]}})]}})]}}),n(ie,{size:"xl",get opened(){return e()},onClose:r,get children(){return[n(re,{}),n(oe,{get children(){return[n(Z,{get children(){return C("home.toolbar.regex_rename_preview")}}),n(ae,{get children(){return n(Q,{class:"list",w:"$full",spacing:"$1",get children(){return[n(U,{class:"title",w:"$full",p:"$2",get children(){return[n(qe,ve({w:{"@initial":"50%","@md":"50%"}},I,{get children(){return C("home.toolbar.regex_rename_preview_old_name")}})),n(qe,ve({w:{"@initial":"50%","@md":"50%"}},I,{get children(){return C("home.toolbar.regex_rename_preview_new_name")}}))]}}),n($e,{get each(){return M()},children:(y,v)=>n(pi,{obj:y,get index(){return v()}})})]}})}}),n(ge,{display:"flex",gap:"$2",get children(){return[n(j,{onClick:()=>{S([]),u("1"),_("string"),r(),i()},colorScheme:"neutral",get children(){return C("global.cancel")}}),n(j,{onClick:()=>{S([]),r(),a()},colorScheme:"neutral",get children(){return C("global.back")}}),n(j,{get loading(){return s()},onClick:async()=>{const y=await l(c(),M());G(y,()=>{S([]),f(""),p(""),u("1"),_("string"),d(),i(),r()})},get disabled(){return M().length==0},get children(){return C("global.ok")}})]}})]}})]}})]},bi=()=>{const e=O(),[t,r]=N("aria2"),{isOpen:o,onOpen:a,onClose:i}=P(),[s,l]=z(no),{pathname:c}=F(),d=g=>{g==="offline_download"&&a()};return b.on("tool",d),A(()=>{b.off("tool",d)}),n(Xe,{title:"home.toolbar.offline_download",type:"text",get opened(){return o()},onClose:i,get loading(){return s()},get tips(){return e("home.toolbar.offline_download-tips")},get topSlot(){return n(Re,{mb:"$2",get children(){return n(br,{get value(){return t()},onChange:g=>r(g),options:[{value:"aria2",label:"Aria2"},{value:"qbit",label:"qBittorrent"}]})}})},onSubmit:async g=>{const u=await l(c(),g.split(`
`),t());G(u,()=>{i()})}})},vi=e=>{const t=O(),r=s=>{s===e.name&&a()};b.on("tool",r),A(()=>{b.off("tool",r)});const{isOpen:o,onOpen:a,onClose:i}=P();return n(ie,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return o()},onClose:i,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[n(re,{}),n(oe,{get children(){return[n(vr,{}),n(Z,{get children(){return t(e.title)}}),n(ae,{get children(){return n(E,{get when(){return o()},get children(){return n(vt,{get fallback(){return n(ze,{})},get children(){return e.children}})}})}})]}})]}})};function yi(e){const t=O();return n(Br,{get children(){return[n(Er,{get children(){return t(`home.local_settings.${e.key}`)}}),n(Je,{get fallback(){return n(Be,{get value(){return lt[e.key]},onInput:r=>{Ft(e.key,r.currentTarget.value)}})},get children(){return n(K,{get when(){return e.type==="select"},get children(){return n(Ar,{get id(){return e.key},get defaultValue(){return lt[e.key]},onChange:r=>Ft(e.key,r),get children(){return[n(Tr,{get children(){return[n(Pr,{get children(){return t("global.choose")}}),n(Fr,{}),n(Rr,{})]}}),n(jr,{get children(){return n(Ir,{get children(){return n($e,{get each(){return e.options},children:r=>n(Lr,{value:r,get children(){return[n(Dr,{get children(){return t(`home.local_settings.${e.key}_options.${r}`)}}),n(Vr,{})]}})})}})}})]}})}})}})]}})}const _i=()=>{const{isOpen:e,onOpen:t,onClose:r}=P(),o=O(),a=i=>{i==="local_settings"&&t()};return b.on("tool",a),A(()=>{b.off("tool",a)}),n(Mr,{get opened(){return e()},placement:"right",onClose:r,get children(){return[n(yr,{}),n(_r,{get children(){return[n($r,{}),n(Sr,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),n(Cr,{get children(){return[n(Q,{spacing:"$2",get children(){return n($e,{each:xr,children:i=>n(yi,i)})}}),n(un,{mt:"$4",get children(){return n(U,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[n(kr,{}),n(Or,{})]}})}})]}})]}})]}})},$i=Te(()=>Pe(()=>import("./Upload.0cd0177e.js"),["assets/Upload.0cd0177e.js","assets/index.7f890236.js","assets/index.d81a3e4b.css","assets/index.5e4d5f4e.js"])),Si=()=>[n(ai,{}),n(ii,{}),n(ci,{}),n(li,{}),n(ui,{}),n(di,{}),n(gi,{}),n(mi,{}),n(wi,{}),n(bi,{}),n(na,{}),n(vi,{name:"upload",title:"home.toolbar.upload",get children(){return n($i,{})}}),n(_i,{})],Ci=()=>n(zr,{get children(){return[n(oi,{}),n(ri,{}),n(Si,{})]}}),xi=()=>{Ur(me("site_title"));const e=me("announcement");return e&&B.render(()=>n(wn,{children:e})),[n(qo,{}),n(Ci,{}),n(Po,{}),n(Ro,{})]},Li=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"}));export{Ii as I,Li as L,Ot as M,ji as T,H as a,wo as b,Ri as g,Uo as i,Y as o,_o as u};
